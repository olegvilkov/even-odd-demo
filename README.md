# Игра чёт-нечет

Простая многопользовательская игра, в которой игроки загадывают числа и пытаются отгадать, чётное или нечётное число загадал противник.

[Поиграть можно тут](https://evenodd-demo.web.app).



## Стек
React, Framework7, Flow/TypeScript, Firestore, Firebase functions, Redux, redux-saga

## Правила игры
* В игре участвует M-игроков.
* Игроки ходят друг за другом по очереди, по принципу round robin.
Во время своего хода игрок пытается угадать, чётное или нечётное число загадал предыдущий участник. Также он загадывает своё число для следующего игрока. За каждое угаданное число игрок получает 1 балл.
* Каждый участник в течение игры делает K-ходов. K=10 и хранится в настройках Firebase Remote Config.
* Игра заканчивается, когда каждый игрок сделал свои K-ходов, и у одного из участников больше очков, чем у других. Для двух игроков: если по истечение 20-ти ходов счёт равный, то игра продолжается до первого разгаданного числа.

Побеждает тот, кто угадал больше чисел.
Первый игрок создаёт игру, называет своё имя и задаёт число участников. Последующие игроки присоединяются к нему, просто указывая своё имя. Как только все игроки вошли, начинается первый ход.  

## Серверная часть
**[Серверная часть](functions/)** реализована через Firebase cloud functions. Код на TypeScript. Функция-триггер, которая реагирует на запись данных в Firestore. Эта функция определяет, когда игра завершилась и кто победитель.

**[Firestore Security Rules](rules/)** вместе с firestore-транзакциями гарантируют честную игру от клиентов.

## Клиентская часть
* Экран Создать игру. На этом экране указываем количество игроков и имя первого участника. Кнопка «Создать».
* Экран Присоединиться к игре. Поле, чтобы написать имя нового участника и кнопка «Присоединиться».
* Экран Игра.
    - Компонент для угадывания чёт-нечет и ввод нового числа с кнопкой «Отправить».
    - Пока участник ждёт других игроков, экран блокируется с сообщением «Сейчас не ваш ход».
    - Компонент, который выводит имена игроков и их текущие очки. Текущие очки отображаем в реальном времени.
    - Когда игра закончилась, выводится сообщение, что игра закончена и имя победителя.
* Экран Список игр. Поддержка нескольких игр, которые идут одновременно. Выводятся текущие и завершенные игры.

Все экраны созданы на базе Framework7.
Бизнес-логика для клиента реализована в redux-sagas.

## Запуск игры локально

### `npm install`
Произвести установку проекта.

### `npm start`.
Используйте чтобы запустить игру в установленном проекте.
Откройте [http://localhost:3000](http://localhost:3000) чтобы просмотреть в браузере.

## Деплой
Выполнить деплой статического клиента на Firebase hosting можно с помощью команды `npm run deploy`. Если открыть сайт https://evenodd-demo.web.app, можно поиграть в игру.

# TODO
[TODO.md](TODO.md)